<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>1:1 채팅</title>
    <link rel="stylesheet" th:href="@{/css/chat.css}">
</head>
<body>
<div id="login-page" class="page">
    <h1>채팅 시작하기</h1>
    <form action="/enterChat" method="post">
        <input type="hidden" name="studyId" th:value="${studyId}">
        <input type="hidden" name="chatType" value="PERSONAL">
        <button type="submit">1:1 채팅 참여하기</button>
    </form>

    <form action="/enterChat" method="post">
        <input type="hidden" name="studyId" th:value="${studyId}">
        <input type="hidden" name="chatType" value="GROUP">
        <button type="submit">그룹 채팅 참여하기</button>
    </form>

</div>
</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // URL에서 studyId 추출
        function getStudyIdFromUrl() {
            const pathSegments = window.location.pathname.split('/');
            const studyIdIndex = pathSegments.indexOf('studies') + 1;
            return pathSegments[studyIdIndex];
        }

        const studyId = getStudyIdFromUrl();

        if (studyId) {
            // 모든 studyId input 필드에 값 설정
            document.querySelectorAll('.studyIdInput').forEach(input => {
                input.value = studyId;
            });
        } else {
            console.error('StudyId not found in URL');
            // studyId를 찾지 못했을 때의 처리 (예: 버튼 비활성화)
        }
    });
</script>

</html>